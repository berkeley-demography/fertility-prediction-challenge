---
title: "Logistic model"
format: html
editor: source
---

```{r}
library(here)
library(tidyverse)
library(tidymodels)
library(bundle)
```

```{r}
raw_data_dir <- here("data")
prepped_data_dir <- here("data-prepped")
```

## Open up the data

```{r}
rec <- unbundle(readRDS(file=here(prepped_data_dir, 'recipe.rds')))
                
train_data <- readRDS(file=here(prepped_data_dir, 'train_split.rds'))

df_train <- train_data$df_train
folds <- train_data$folds
```


## Logistic regression 


```{r}
logistic_model <- 
   logistic_reg() %>% 
     set_engine('glm') %>% 
     set_mode('classification')

logistic_workflow <- 
  workflow() %>%
  add_model(logistic_model) %>%
  add_recipe(rec) 

logistic_fit <-
  logistic_workflow %>%
  fit(data = df_train)
```

```{r}
saveRDS(bundle(logistic_fit),
        file=here(prepped_data_dir, 'fit_logistic.rds'))
```

